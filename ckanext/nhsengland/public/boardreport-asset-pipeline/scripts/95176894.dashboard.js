$(document).ready(function(){$(function(){$(window).bind("resize",function(){b()}).trigger("resize")});var a=!0,b=function(){if(a)a=!1;else{var b=1440,c=110,d=$("#MainWrapper").width(),e=b-d;e/=4,d+=e;var f=d/b,g=Math.floor(c*f);$("body").css("font-size",g+"%")}};$("body").on("click",".accordionHandle",function(){var a=$(this).closest("[data-indicator-id]");if(a.length>0){var b=a.attr("data-indicator-id"),c=$('.accordionContent[data-indicator-id="'+b+'"]');c.length>0&&(c.slideToggle("fast"),$(this).toggleClass("active"))}});var c=$(".finance table");$.fn.matchWidths=function(){for(var a=$(this),b=a.first().find("thead tr th:first").length,c=new Array,d=0;b>d;d++){var e=Math.max.apply(a,$.map(a,function(a){var b=$(a).find("thead tr th:first").eq(d),c=b.outerWidth();return c}));c[d]=e}$.map(a.find("thead tr th:first"),function(a){var b=$(a).index(),d=c[b];return $(a).outerWidth(d)})},c.matchWidths()}),function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),function(a){a.fn.extend({donetyping:function(b,c){c=c||1e3;var d,e=function(a){d&&(d=null,b.call(a))};return this.each(function(b,f){var g=a(f);g.is(":input")&&g.on("keyup keypress",function(a){("keyup"!=a.type||8==a.keyCode)&&(d&&clearTimeout(d),d=setTimeout(function(){e(f)},c))}).on("blur",function(){e(f)})})}})}(jQuery),function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),function(){function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype,e=this,f=e.EventEmitter;d.getListeners=function(a){var b,c,d=this._getEvents();if("object"==typeof a){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;a.length>b;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;a.length>b;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if("object"===c)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},d._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return e.EventEmitter=f,a},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return a}):"object"==typeof module&&module.exports?module.exports=a:this.EventEmitter=a}.call(this),function(a){function b(b){var c=a.event;return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,d=function(){};c.addEventListener?d=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(d=function(a,c,d){a[c+d]=d.handleEvent?function(){var c=b(a);d.handleEvent.call(d,c)}:function(){var c=b(a);d.call(a,c)},a.attachEvent("on"+c,a[c+d])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var f={bind:d,unbind:e};"function"==typeof define&&define.amd?define("eventie/eventie",f):a.eventie=f}(this),function(a,b){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(c,d){return b(a,c,d)}):"object"==typeof exports?module.exports=b(a,require("wolfy87-eventemitter"),require("eventie")):a.imagesLoaded=b(a,a.EventEmitter,a.eventie)}(window,function(a,b,c){function d(a,b){for(var c in b)a[c]=b[c];return a}function e(a){return"[object Array]"===m.call(a)}function f(a){var b=[];if(e(a))b=a;else if("number"==typeof a.length)for(var c=0,d=a.length;d>c;c++)b.push(a[c]);else b.push(a);return b}function g(a,b,c){if(!(this instanceof g))return new g(a,b);"string"==typeof a&&(a=document.querySelectorAll(a)),this.elements=f(a),this.options=d({},this.options),"function"==typeof b?c=b:d(this.options,b),c&&this.on("always",c),this.getImages(),j&&(this.jqDeferred=new j.Deferred);var e=this;setTimeout(function(){e.check()})}function h(a){this.img=a}function i(a){this.src=a,n[a]=this}var j=a.jQuery,k=a.console,l=void 0!==k,m=Object.prototype.toString;g.prototype=new b,g.prototype.options={},g.prototype.getImages=function(){this.images=[];for(var a=0,b=this.elements.length;b>a;a++){var c=this.elements[a];"IMG"===c.nodeName&&this.addImage(c);var d=c.nodeType;if(d&&(1===d||9===d||11===d))for(var e=c.querySelectorAll("img"),f=0,g=e.length;g>f;f++){var h=e[f];this.addImage(h)}}},g.prototype.addImage=function(a){var b=new h(a);this.images.push(b)},g.prototype.check=function(){function a(a,e){return b.options.debug&&l&&k.log("confirm",a,e),b.progress(a),c++,c===d&&b.complete(),!0}var b=this,c=0,d=this.images.length;if(this.hasAnyBroken=!1,!d)return void this.complete();for(var e=0;d>e;e++){var f=this.images[e];f.on("confirm",a),f.check()}},g.prototype.progress=function(a){this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;var b=this;setTimeout(function(){b.emit("progress",b,a),b.jqDeferred&&b.jqDeferred.notify&&b.jqDeferred.notify(b,a)})},g.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var b=this;setTimeout(function(){if(b.emit(a,b),b.emit("always",b),b.jqDeferred){var c=b.hasAnyBroken?"reject":"resolve";b.jqDeferred[c](b)}})},j&&(j.fn.imagesLoaded=function(a,b){var c=new g(this,a,b);return c.jqDeferred.promise(j(this))}),h.prototype=new b,h.prototype.check=function(){var a=n[this.img.src]||new i(this.img.src);if(a.isConfirmed)return void this.confirm(a.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var b=this;a.on("confirm",function(a,c){return b.confirm(a.isLoaded,c),!0}),a.check()},h.prototype.confirm=function(a,b){this.isLoaded=a,this.emit("confirm",this,b)};var n={};return i.prototype=new b,i.prototype.check=function(){if(!this.isChecked){var a=new Image;c.bind(a,"load",this),c.bind(a,"error",this),a.src=this.src,this.isChecked=!0}},i.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},i.prototype.onload=function(a){this.confirm(!0,"onload"),this.unbindProxyEvents(a)},i.prototype.onerror=function(a){this.confirm(!1,"onerror"),this.unbindProxyEvents(a)},i.prototype.confirm=function(a,b){this.isConfirmed=!0,this.isLoaded=a,this.emit("confirm",this,b)},i.prototype.unbindProxyEvents=function(a){c.unbind(a.target,"load",this),c.unbind(a.target,"error",this)},g});var dashWrapper=function(){function a(){n=m.find("#NavPage"),n.length&&(n.height(l),o.css({top:l+"px"}))}function b(){B.css({"min-height":l-96+"px"})}function c(){r.on("click touchstart",function(a){console.log("Menu Button Click"),a.preventDefault(),"closed"==jQuery.data(y,"state")?($(this).addClass("menuButtonActive"),TweenMax.to(B,.2,{marginTop:"97px"}),TweenMax.to(y,.2,{bottom:"-97px"}),TweenMax.staggerTo(z,.15,{opacity:1,scale:1,delay:.25},.05),B.addClass("blur"),jQuery.data(y,"state","open")):($(this).removeClass("menuButtonActive"),TweenMax.to(z,.15,{opacity:0,scale:0,onComplete:function(){B.removeClass("blur")}}),TweenMax.to(B,.15,{marginTop:"0",delay:.15}),TweenMax.to(y,.15,{bottom:"0",delay:.15}),jQuery.data(y,"state","closed"))})}function d(){z.on("click",function(a){a.preventDefault(),$thisSubMenu=$(this).data("submenu"),TweenMax.to(z,.15,{opacity:0,scale:0}),TweenMax.to(r,.15,{opacity:0,scale:0,delay:.1}),TweenMax.to(s,.15,{opacity:1,scale:1,delay:.25}),"widgets"==$thisSubMenu&&(m.find(".activeSubMenu").removeClass("activeSubMenu"),D.addClass("activeSubMenu"),$subMenuInner=m.find(".activeSubMenu .subMenuInner"),TweenMax.to(D,0,{bottom:"-97px",opacity:1,scale:1,zIndex:3,delay:.35}),TweenMax.to($subMenuInner,.15,{opacity:1,delay:.35}))})}function e(){s.on("click",function(){$activeSubMenu=m.find(".activeSubMenu"),$subMenuInner=m.find(".activeSubMenu .subMenuInner"),TweenMax.to($subMenuInner,.2,{opacity:0}),TweenMax.to($activeSubMenu,0,{zIndex:0,bottom:"0",delay:.2}),TweenMax.to(s,.15,{opacity:0,scale:0,delay:.15}),TweenMax.to(r,.15,{opacity:1,scale:1,delay:.3}),TweenMax.staggerTo(z,.15,{opacity:1,scale:1,delay:.3},.05)})}function f(){u.on("click",function(){g(document.documentElement),TweenMax.to(p,.2,{opacity:"0"}),TweenMax.to(p,0,{zIndex:"-1",delay:.2}),TweenMax.to(B,.2,{top:"0px",marginTop:"0px",delay:.2}),B.removeClass("blur"),jQuery.data(m,"state","presentation")})}function g(a){a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()}function h(){var a=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;void 0==a&&(TweenMax.to(p,0,{zIndex:"9",delay:0}),TweenMax.to(p,.2,{opacity:"1",delay:.2}),TweenMax.to(B,.2,{top:"98px"}),"open"==jQuery.data(y,"state")&&TweenMax.to(B,.2,{marginTop:"98px",onComplete:function(){B.addClass("blur")}}))}function i(){$t=E,$e=Math.floor($(window).width()/$t);var a=2;2==E&&(a=2),H=$("#contentWrapper #container").gridster({widget_margins:[F,F],widget_base_dimensions:[G,G],min_cols:E,autogrow_cols:!1,avoid_overlapped_widgets:!0}).data("gridster"),$("#WidgetHolder>.ember-view").each(function(){var a=$(this).find("li:first"),b=parseInt(a.attr("data-sizex")),c=parseInt(a.attr("data-sizex"));a.attr("ID",$(this).attr("ID")),a.addClass("ember-view"),H.add_widget(a,b,c),$(this).remove()}),dragTimeout=null,$("#container .gs-w").on("mousedown touchstart",function(a,b){var c=this;b&&b.start?$(c).addClass("dragging"):(H.disable(),dragTimeout=setTimeout(function(){H.enable(),$(c).trigger(a,[{start:!0}]),C.addClass("dragging")},300))}).bind("mouseup  touchend",function(){o.find(".dragging").removeClass("dragging"),clearTimeout(dragTimeout)})}function j(){var a=Math.floor(k/(G+F));console.log("this screen size will comfortably fit "+a+" widgets.")}var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=null,F=11,G=210,H=null,I=function(){var a={};return function(b,c,d){d||(d="Don't call this twice without a uniqueId"),a[d]&&clearTimeout(a[d]),a[d]=setTimeout(b,c)}}();return{init:function(){console.log("dashWrapper.init"),this.initDOMVars(),jQuery.data(y,"state","closed"),c(),d(),e(),b(),v.on("click",function(){TweenMax.to(x,0,{zIndex:"99"}),TweenMax.to(x,.2,{opacity:"1"}),o.addClass("blur"),n.addClass("blur")}),w.on("click",function(){TweenMax.to(x,0,{zIndex:"-1",delay:.2}),TweenMax.to(x,.2,{opacity:"0"}),o.removeClass("blur"),n.removeClass("blur")}),a(),$("#NavPageLinks a").on("click",function(){dashWrapper.scrollToSiteWrapper()}),$(window).on("resize",function(){I(function(){k=$(window).width(),l=$(window).height(),a(),b(),j()})});document.addEventListener&&(document.addEventListener("webkitfullscreenchange",h,!0),document.addEventListener("mozfullscreenchange",h,!0),document.addEventListener("fullscreenchange",h,!0),document.addEventListener("MSFullscreenChange",h,!0)),f()},isInitialized:!1,initDOMVars:function(){dashWrapper.isInitialized=!0,k=$(window).width(),l=$(window).height(),m=$("body"),n=m.find("#NavPage"),o=$("#SiteWrapper"),p=$("#headerWrapper"),q=$("#buttonWrapper"),r=$("button.menuButton"),s=$("button.backButton"),t=$("#headerLine"),u=$("#presentation"),v=$("#infoButton"),w=$("#infoCross"),x=$("#infoWrapper"),y=$("#SecondNav"),z=y.find("button"),A=$("#addWidget"),B=$("#contentWrapper"),C=$("#container"),D=$("#WidgetNavWrapper")},initGridster:function(){dashWrapper.isInitialized||(console.log("DOM Vars require reloading"),this.initDOMVars()),j(),i()},scrollToSiteWrapper:function(){$("html, body").animate({scrollTop:o.offset().top},300)},showNavPage:function(){if(0==n.length&&(n=$("#NavPage")),n.length){a(),$detachHeight=n.height();var b=$(document).scrollTop();b<=$detachHeight&&(B.addClass("overflowX"),p.removeClass("stickyWrapper"),B.removeClass("stickyContent"),o.css({top:$detachHeight}),$("html, body").scrollTop($detachHeight))}}}}();